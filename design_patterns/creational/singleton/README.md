# Singleton Pattern

## üìã –û–ø–∏—Å

**Singleton** - –ø–æ—Ä–æ–¥–∂—É—é—á–∏–π –ø–∞—Ç–µ—Ä–Ω, —è–∫–∏–π –≥–∞—Ä–∞–Ω—Ç—É—î —â–æ –∫–ª–∞—Å –º–∞—î —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä —ñ –Ω–∞–¥–∞—î –≥–ª–æ–±–∞–ª—å–Ω—É —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø—É –¥–æ –Ω—å–æ–≥–æ.

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Ç—Ä—ñ–±–Ω–æ:
1. –ú–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ **–æ–¥–∏–Ω** –µ–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—É
2. –ù–∞–¥–∞—Ç–∏ **–≥–ª–æ–±–∞–ª—å–Ω–∏–π** –¥–æ—Å—Ç—É–ø –¥–æ —Ü—å–æ–≥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä—É

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
- –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö connection pool
- Logger
- Configuration manager
- Cache

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

1. –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (–∑—Ä–æ–±–∏—Ç–∏ –π–æ–≥–æ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º)
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç–∏—á–Ω–∏–π –º–µ—Ç–æ–¥, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î –µ–∫–∑–µ–º–ø–ª—è—Ä
3. –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤–∏–∫–ª–∏–∫—É - —Å—Ç–≤–æ—Ä–∏—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä
4. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –≤–∏–∫–ª–∏–∫–∞—Ö - –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π

---

## üîß –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤ Go

### –í–∞—Ä—ñ–∞–Ω—Ç 1: sync.Once (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π)

```go
type Database struct {
    connection string
}

var (
    instance *Database
    once     sync.Once
)

func GetInstance() *Database {
    once.Do(func() {
        instance = &Database{
            connection: "postgresql://localhost:5432",
        }
    })
    return instance
}
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: init() (Eager initialization)

```go
var instance = &Database{
    connection: "postgresql://localhost:5432",
}

func GetInstance() *Database {
    return instance
}
```

---

## ‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏

- ‚úÖ –ì–∞—Ä–∞–Ω—Ç—É—î –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞ —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø—É
- ‚úÖ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ (lazy)
- ‚úÖ Thread-safe (–∑ sync.Once)

## ‚ùå –ù–µ–¥–æ–ª—ñ–∫–∏

- ‚ùå –ü–æ—Ä—É—à—É—î Single Responsibility Principle
- ‚ùå –°–∫–ª–∞–¥–Ω–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ (–≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω)
- ‚ùå –ú–æ–∂–µ –ø—Ä–∏—Ö–æ–≤—É–≤–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- ‚ùå –ü–æ—Ç—Ä—ñ–±–Ω–∞ –æ—Å–æ–±–ª–∏–≤–∞ –æ–±–µ—Ä–µ–∂–Ω—ñ—Å—Ç—å –≤ –±–∞–≥–∞—Ç–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—ñ

---

## üéì –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

‚úÖ **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–ª–∏:**
- –ü–æ—Ç—Ä—ñ–±–µ–Ω –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä (DB, Logger, Config)
- –ì–ª–æ–±–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫—Ä–∏—Ç–∏—á–Ω–∏–π
- –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–µ—Å—É—Ä—Å–æ–º—ñ—Å—Ç–∫–∞

‚ùå **–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–ª–∏:**
- –ú–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ —á–µ—Ä–µ–∑ DI (Dependency Injection)
- –ü–æ—Ç—Ä—ñ–±–Ω—ñ —Ä—ñ–∑–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –£—Å–∫–ª–∞–¥–Ω—é—î —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

---

## üåç –†–µ–∞–ª—å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏

### –í Go stdlib:
- `sync.Once` - —Å–∞–º –ø–æ —Å–æ–±—ñ singleton pattern
- `log.Default()` - logger singleton

### –í —Ä–µ–∞–ª—å–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö:
- Database connection pool
- Application configuration
- Logging system
- Cache manager

---

## üíª –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥

```bash
go run main.go
```

---

## üìö –ë—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó

- [Refactoring.Guru - Singleton](https://refactoring.guru/design-patterns/singleton)

